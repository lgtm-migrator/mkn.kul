#! clean build -dtOp usage

# mkn.kul - Kommon Usage Library
#   Cross platform wrapper for systems operations / IO / threads / processes
#   Default profile "lib" is header only, use "-compiled" for library options
#

name: mkn.kul

parent: lib

profile:
  - name: base
    inc: ./inc

  - name: lib
    parent: base
    if_link:
      nix: -pthread

  - name: lib-compiled
    parent: base
    src: |
      ./src/all
      ./src/os/${OS}
    if_src:
        bsd: ./src/os/nixish
        nix: ./src/os/nixish
    arg: -D_KUL_COMPILED_LIB_

  - name: test
    parent: lib
    inc: .
    main: test.cpp
    mode: none
    dep: google.test

  - name: bench
    parent: lib
    main: bench.cpp
    dep: google.benchmark

  - name: usage
    parent: lib
    main: usage.cpp

  - name: format
    mod:
    - name: clang.format
      init:
        style: file
        types: cpp:cxx:cc:h:hpp
        paths: .
