#! clean build -dtKp usage

# mkn.kul - Kommon Usage Library
#   Cross platform wrapper for systems operations / IO / threads / processes
#   Default profile "lib" is header only, use "-compiled" profiles for library linking
#

name: mkn.kul

parent: lib

profile:
  - name: base
    inc: ./inc ./os/${OS}/inc
    if_inc:
        bsd: ./os/nixish/inc
        nix: ./os/nixish/inc

  - name: lib
    parent: base

  - name: lib-compiled
    parent: base
    src: ./src ./os/${OS}/src
    if_src:
        bsd: ./os/nixish/src
        nix: ./os/nixish/src
    arg: -D_KUL_COMPILED_LIB_

  - name: test
    parent: lib
    inc: .
    main: test.cpp
    mode: none
    dep:
    - name: google.test # https://github.com/mkn/google.test

  - name: bench
    parent: lib
    main: bench.cpp
    dep:
    - name: google.benchmark # https://github.com/mkn/google.benchmark

  - name: usage
    self: lib-compiled
    main: usage.cpp

  - name: format
    mod:
    - name: clang.format
      init:
        style: file
        types: cpp:cxx:cc:h:hpp
        paths: .
